### **四版JSON完整差异对比表（基于现有参数）**

#### **一、根层级结构差异**

| 字段路径 | v1.0        | v1.2          | v2.x        | v3.0          | 差异说明               |
| -------- | ----------- | ------------- | ----------- | ------------- | ---------------------- |
| 根对象   | version字段 | 无version字段 | version字段 | 无version字段 | 版本字段存在性不一致   |
| `combs`  | 存在        | 缺失          | 缺失        | 缺失          | v1.0存在后续版本均删除 |

------

#### **二、profile字段差异**

| 字段路径          | v1.0                        | v1.2            | v2.x         | v3.0                     | 差异说明                                  |
| ----------------- | --------------------------- | --------------- | ------------ | ------------------------ | ----------------------------------------- |
| profile.xxxId     | industryId, sceneId等旧字段 | 缺失            | 替换为stTmId | 完全重构                 | 字段语义重构（例如v3.0新增video相关字段） |
| profile字段总特征 | 描述设备场景分类            | 缺失profile对象 | 简化为stTmId | 新增状态控制字段(status) | v3.0功能扩展                              |

------

#### **三、properties字段差异**

| 字段路径                    | v1.0           | v1.2       | v2.x           | v3.0                                           | 差异说明                   |
| --------------------------- | -------------- | ---------- | -------------- | ---------------------------------------------- | -------------------------- |
| properties[].required       | 存在           | 缺失       | 缺失           | 缺失                                           | 仅v1.0有`required`字段     |
| properties[].functionType   | "u"            | "u"        | "u"            | "st"                                           | v3.0值变化（可能需要映射） |
| properties[].dataType.specs | 结构化规范     | 同上       | 同上           | **v3.0的struct specs被错误存储为对象而非数组** | v3.0存在语法错误需修正     |
| dataType.specs参数类型      | step为空字符串 | step为null | step为空字符串 | step为空字符串                                 | v1.2参数存在null值         |
| properties[].desc           | ""             | null       | null           | ""                                             | 空字符串与null格式差异     |

------

#### **四、services字段差异**

| 字段路径                | v1.0   | v1.2 | v2.x   | v3.0   | 差异说明            |
| ----------------------- | ------ | ---- | ------ | ------ | ------------------- |
| services[].callType     | "sync" | "s"  | "sync" | "sync" | v1.2使用简写形式`s` |
| services[].functionType | "u"    | "u"  | "u"    | "st"   | v3.0值变化          |

------

#### **五、events字段差异**

| 字段路径              | v1.0 | v1.2           | v2.x | v3.0                     | 差异说明           |
| --------------------- | ---- | -------------- | ---- | ------------------------ | ------------------ |
| events[].functionType | "u"  | "u"            | "u"  | "st"                     | v3.0值变化         |
| outputData的嵌套顺序  | 正常 | identifier乱序 | 正常 | dataType对象属性顺序错乱 | JSON对象无序性差异 |

------

#### **六、通用数据类型差异**

| 数据类型       | 差异点                                                       |
| -------------- | ------------------------------------------------------------ |
| **struct类型** | v3.0定义了错误的struct（specs应为数组，但某些字段存为对象需手动转换） |
| **bitMap类型** | 所有版本定义一致，无差异                                     |
| **array类型**  | v3.0对应的array.specs中存在重复键名（需要解析容错处理）      |